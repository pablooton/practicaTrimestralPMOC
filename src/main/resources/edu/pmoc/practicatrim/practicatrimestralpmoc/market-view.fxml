<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<ScrollPane fitToWidth="true" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="edu.pmoc.practicatrim.practicatrimestralpmoc.controller.MarketController">
        <VBox alignment="TOP_CENTER" spacing="15.0" style="-fx-background-color: #f4f4f4; -fx-padding: 20;"
              maxHeight="Infinity" maxWidth="Infinity">

            <Label text="Mercado de Fichajes" alignment="CENTER" maxWidth="Infinity">
                <font>
                    <Font name="System Bold" size="24.0" />
                </font>
                <padding><Insets bottom="10.0"/></padding>
            </Label>

            <VBox spacing="10" alignment="TOP_CENTER" style="-fx-padding: 15; -fx-background-color: #ffffff; -fx-border-radius: 8; -fx-border-color: #cccccc;">

                <Label text="Búsqueda y Filtro" style="-fx-font-weight: bold; -fx-text-fill: #333333;" alignment="CENTER" maxWidth="Infinity"/>
                <Separator />

                <TextField fx:id="buscarField"
                           promptText="Buscar jugadores por nombre o posición"
                           maxWidth="700"
                />

                <Separator />

                <GridPane hgap="20" vgap="10" alignment="CENTER" maxWidth="700">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="35" hgrow="ALWAYS"/>
                        <ColumnConstraints percentWidth="65" hgrow="ALWAYS"/>
                    </columnConstraints>

                    <VBox GridPane.columnIndex="0" GridPane.rowIndex="0" spacing="5">
                        <Label fx:id="lblSliderValue" style="-fx-font-weight: bold;" text="Precio Máximo: 100M €" maxWidth="Infinity"/>
                        <Slider fx:id="valorSlider"
                                 majorTickUnit="20" minorTickCount="4"
                                 showTickMarks="true"
                                snapToTicks="true" maxWidth="Infinity" onMouseReleased="#aplicarFiltros"/>
                    </VBox>

                    <VBox GridPane.columnIndex="1" GridPane.rowIndex="0" spacing="5">
                        <Label text="Filtrar por Posición:" style="-fx-font-weight: bold; -fx-text-fill: #333333;" maxWidth="Infinity"/>
                        <HBox alignment="CENTER_LEFT" spacing="10" >
                            <CheckBox text="TODOS" fx:id="chkTodos" selected="true" onAction="#aplicarFiltros"/>
                            <CheckBox text="POR" fx:id="chkPOR" onAction="#aplicarFiltros"/>
                            <CheckBox text="DEF" fx:id="chkDEF" onAction="#aplicarFiltros"/>
                            <CheckBox text="CEN" fx:id="chkMED" onAction="#aplicarFiltros"/>
                            <CheckBox text="DEL" fx:id="chkDEL" onAction="#aplicarFiltros"/>
                        </HBox>
                    </VBox>
                </GridPane>
            </VBox>

            <Separator />

            <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-background-color: #e0f2f7; -fx-padding: 10; -fx-border-radius: 5; -fx-background-radius: 5;">
                <Label text="Tu Presupuesto Actual:" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                <Label fx:id="lblPresupuesto" text="0 €" style="-fx-font-weight: bold; -fx-text-fill: #007bff; -fx-font-size: 16px;"/>
            </HBox>

            <SplitPane dividerPositions="0.65" VBox.vgrow="ALWAYS">

                <AnchorPane>
                    <VBox AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" spacing="5.0" style="-fx-padding: 5;">
                        <Label text="Jugadores Libres Disponibles" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                        <TableView fx:id="marketTable" VBox.vgrow="ALWAYS" prefHeight="200.0">
                            <columns>
                                <TableColumn fx:id="colNombre" text="Jugador" prefWidth="150.0"/>
                                <TableColumn fx:id="colPosicion" text="Pos." prefWidth="70.0"/>
                                <TableColumn fx:id="colMediaPuntos" text="Puntos" prefWidth="70.0"/>
                                <TableColumn fx:id="colValorMercado" text="Precio (€)" prefWidth="120.0"/>
                            </columns>
                            <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                        </TableView>
                    </VBox>
                </AnchorPane>

                <AnchorPane>
                    <VBox fx:id="detailPane" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" spacing="15.0" alignment="TOP_CENTER" style="-fx-background-color: #ffffff; -fx-padding: 20; -fx-border-color: #cccccc; -fx-border-width: 1; -fx-border-radius: 5;">
                        <Label text="Detalles del Fichaje" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #333333;"/>
                        <Separator />

                        <GridPane hgap="10.0" vgap="10.0">
                            <Label text="Nombre:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                            <TextField fx:id="txtDetalleNombre" editable="false" promptText="Nombre del Jugador" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                            <Label text="Posición:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                            <TextField fx:id="txtDetallePosicion" editable="false" promptText="DEL, MED, DEF, POR" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                            <Label text="Equipo Liga:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                            <TextField fx:id="txtDetalleEquipoLiga" editable="false" promptText="Equipo de la Liga" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                            <Label text="Media Pts:" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                            <TextField fx:id="txtDetalleMediaPuntos" editable="false" promptText="Puntos Históricos" GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                            <Label text="Precio (€):" style="-fx-font-weight: bold;" GridPane.columnIndex="0" GridPane.rowIndex="4"/>
                            <TextField fx:id="txtDetalleValorMercado" editable="false" promptText="Precio en €" style="-fx-text-fill: #e67e22; -fx-font-weight: bold;" GridPane.columnIndex="1" GridPane.rowIndex="4"/>
                        </GridPane>

                        <Button fx:id="btnComprar" text="Fichar Jugador" onAction="#handleFicharJugador"
                                style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-font-size: 15px; -fx-padding: 10 20; -fx-border-radius: 5; -fx-background-radius: 5;"
                                disable="true">
                            <VBox.margin><Insets top="10.0"/></VBox.margin>
                        </Button>
                    </VBox>
                </AnchorPane>
            </SplitPane>
        </VBox>
</ScrollPane>